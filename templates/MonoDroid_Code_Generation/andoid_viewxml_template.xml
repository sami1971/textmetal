<?xml version="1.0" encoding="utf-8"?>

<!--
	Copyright ©2002-2011 Daniel Bullington (dpbullington@gmail.com)
	Distributed under the MIT license: http://www.opensource.org/licenses/mit-license.php
-->
<Template xmlns="http://code.google.com/p/textmetal/rev3">

	<OutputScope name="view_markup_fragments.g.txt">
		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[
	
<TextView
	android:id="@+id/${android_prefix}_tv${TextFileLine}"
	android:layout_width="wrap_content"
	android:layout_height="wrap_content"
	android:text="@string/${android_prefix}_tv${TextFileLine}"
	android:layout_gravity="center_vertical">	
</TextView>

<EditText
	android:id="@+id/${android_prefix}_et${TextFileLine}"
	android:layout_width="fill_parent"
	android:layout_height="wrap_content"
	android:text="%${TextFileLine}%"
	android:textSize="18sp">
</EditText>

]]>
			</ForEach.Body>
		</ForEach>
	</OutputScope>

	<OutputScope name="strings_markup_fragments.g.txt">
		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[<string name="${android_prefix}_tv${TextFileLine}">${TextFileLine}:</string>
]]>
			</ForEach.Body>
		</ForEach>
	</OutputScope>

	<OutputScope name="android_view_junks.g.cs">

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[private TextView ${android_prefix}_tv${TextFileLine};
]]>
			</ForEach.Body>
		</ForEach>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[private EditText ${android_prefix}_et${TextFileLine};
]]>
			</ForEach.Body>
		</ForEach>

		<![CDATA[
]]>
		
		
		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[private string _${TextFileLine}
{
	get
	{
		return this.${android_prefix}_tv${TextFileLine}.CoreGetValue<string>();
	}
	set
	{
		this.${android_prefix}_tv${TextFileLine}.CoreSetValue<string>(value);
	}
}

]]>
			</ForEach.Body>
		</ForEach>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[private string ${TextFileLine}
{
	get
	{
		return this.${android_prefix}_et${TextFileLine}.CoreGetValue<string>();
	}
	set
	{
		this.${android_prefix}_et${TextFileLine}.CoreSetValue<string>(value);
	}
}

]]>
			</ForEach.Body>
		</ForEach>
		
		
	
		<![CDATA[

protected override void EnsureChildViews()
{
]]>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[	this.${android_prefix}_tv${TextFileLine} = this.FindViewById<TextView>(Resource.Id.${android_prefix}_tv${TextFileLine});
]]>
			</ForEach.Body>
		</ForEach>
	
		<![CDATA[
]]>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[	this.${android_prefix}_et${TextFileLine} = this.FindViewById<EditText>(Resource.Id.${android_prefix}_et${TextFileLine});
]]>
			</ForEach.Body>
		</ForEach>

		<![CDATA[
]]>


		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[	if((object)this.${android_prefix}_tv${TextFileLine} == null)
		throw new InvalidOperationException("The view '${android_prefix}_tv${TextFileLine}' was not found.");	
]]>

				<If>
					<If.Condition>
						<BinaryExpression operator="Ne">
							<BinaryExpression.LeftExpression>
								<Facet name="#LoopCount" />
							</BinaryExpression.LeftExpression>
							<BinaryExpression.RightExpression>
								<Facet name="#LoopIndex" />
							</BinaryExpression.RightExpression>
						</BinaryExpression>
					</If.Condition>
					<If.True>
						<![CDATA[
]]>
					</If.True>
				</If>

			</ForEach.Body>
		</ForEach>
	
		<![CDATA[
]]>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[	if((object)this.${android_prefix}_et${TextFileLine} == null)
		throw new InvalidOperationException("The view '${android_prefix}_et${TextFileLine}' was not found.");
]]>

				<If>
					<If.Condition>
						<BinaryExpression operator="Ne">
							<BinaryExpression.LeftExpression>
								<Facet name="#LoopCount" />
							</BinaryExpression.LeftExpression>
							<BinaryExpression.RightExpression>
								<Facet name="#LoopIndex" />
							</BinaryExpression.RightExpression>
						</BinaryExpression>
					</If.Condition>
					<If.True>
						<![CDATA[
]]>
					</If.True>
				</If>

			</ForEach.Body>
		</ForEach>

		<![CDATA[}

]]>








		<![CDATA[

protected override void ApplyModelToView()
{
]]>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[	this.${TextFileLine} = this.Model.${TextFileLine};]]>

				<If>
					<If.Condition>
						<BinaryExpression operator="Ne">
							<BinaryExpression.LeftExpression>
								<Facet name="#LoopCount" />
							</BinaryExpression.LeftExpression>
							<BinaryExpression.RightExpression>
								<Facet name="#LoopIndex" />
							</BinaryExpression.RightExpression>
						</BinaryExpression>
					</If.Condition>
					<If.True>
						<![CDATA[
]]>
					</If.True>
				</If>
			</ForEach.Body>
		</ForEach>	

		<![CDATA[
}

]]>	
		
		
		
		
		
		
		
		
		
		<![CDATA[	
		
protected override void ApplyViewToModel()
{
]]>

		<ForEach in="TextFileLines" var-ct="#LoopCount" var-ix="#LoopIndex" var-item="#item">
			<ForEach.Body>		
				<![CDATA[	this.Model.${TextFileLine} = this.${TextFileLine};]]>

				<If>
					<If.Condition>
						<BinaryExpression operator="Ne">
							<BinaryExpression.LeftExpression>
								<Facet name="#LoopCount" />
							</BinaryExpression.LeftExpression>
							<BinaryExpression.RightExpression>
								<Facet name="#LoopIndex" />
							</BinaryExpression.RightExpression>
						</BinaryExpression>
					</If.Condition>
					<If.True>
						<![CDATA[
]]>
					</If.True>
				</If>
			</ForEach.Body>
		</ForEach>	

		<![CDATA[
}

]]>	
	</OutputScope>


</Template>